@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root {
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.custom-scrollbar::-webkit-scrollbar { width: 6px; height: 6px; }
.custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
.custom-scrollbar::-webkit-scrollbar-thumb { background-color: rgba(156, 163, 175, 0.5); border-radius: 20px; }

.writing-vertical {
  writing-mode: vertical-rl;
  text-orientation: upright;
  letter-spacing: 0.1em;
}

/* --- A4 紙張設定 --- */
.a4-page {
  width: 210mm;
  height: 297mm;
  background: white;
  margin: 0 auto 20px auto;
  padding: 0;
  overflow: hidden;
  position: relative;
  box-shadow: 0 0 15px rgba(0,0,0,0.1);
  page-break-after: always;
  break-after: page;
}

/* --- Diary 風格：方格紙背景 (新) --- */
.notebook-grid {
  background-color: #fff;
  background-image: 
    linear-gradient(#e5e7eb 1px, transparent 1px),
    linear-gradient(90deg, #e5e7eb 1px, transparent 1px);
  background-size: 20px 20px;
}

/* --- Manga 風格：強效網點 (修正) --- */
.screentone {
  /* 增加黑點濃度與對比 */
  background-image: radial-gradient(circle, #000 25%, transparent 26%);
  background-size: 4px 4px;
  opacity: 0.15; /* 微微透出，不要太淡 */
}
.comic-filter {
  filter: contrast(120%) brightness(105%);
}
.speed-lines-radial {
  background: repeating-conic-gradient(from 0deg, transparent 0deg 5deg, rgba(0,0,0,0.1) 5deg 5.5deg);
}

.speech-bubble-boom {
  background: white; border: 3px solid black; padding: 12px;
  clip-path: polygon(0% 15%, 5% 10%, 0% 0%, 15% 5%, 25% 0%, 35% 10%, 50% 0%, 65% 10%, 75% 0%, 85% 5%, 100% 0%, 95% 15%, 100% 25%, 90% 35%, 100% 50%, 90% 65%, 100% 75%, 95% 85%, 100% 100%, 85% 95%, 75% 100%, 65% 90%, 50% 100%, 35% 90%, 25% 100%, 15% 95%, 0% 100%, 5% 85%, 0% 75%, 10% 65%, 0% 50%, 10% 35%, 0% 25%);
  box-shadow: 4px 4px 0 #000;
}
.panel-slant-right { clip-path: polygon(0 0, 100% 0, 85% 100%, 0% 100%); border-right: 4px solid black; }
.panel-slant-left { clip-path: polygon(15% 0, 100% 0, 100% 100%, 0 100%); }
.panel-jagged-bottom { clip-path: polygon(0 0, 100% 0, 100% 90%, 50% 100%, 0 90%); }

/* --- 列印強制設定 --- */
@media print {
  body { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  @page { size: A4 portrait; margin: 0; }
  
  html, body, #root {
    height: auto !important;
    min-height: 100% !important;
    overflow: visible !important;
  }

  .a4-page {
    margin: 0 !important;
    box-shadow: none !important;
    width: 100% !important; 
    height: 297mm !important;
    page-break-after: always !important;
    break-after: page !important;
    overflow: hidden !important;
    position: relative !important;
  }

  body * { visibility: hidden; }
  [data-reactroot] *, .a4-page, .a4-page * { visibility: visible; }
  
  .a4-page { position: relative; left: auto; top: auto; }
}